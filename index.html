<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Work ERP PRO</title>

<style>
body{
    font-family:-apple-system;
    background:#111;
    color:white;
    text-align:center;
    padding:20px;
}

h1{
    margin-bottom:20px;
}

.card{
    background:#222;
    padding:20px;
    margin:15px 0;
    border-radius:20px;
}

button{
    margin:8px;
    padding:12px 18px;
    border-radius:12px;
    border:none;
    background:#007aff;
    color:white;
    font-size:16px;
}

table{
    width:100%;
    margin-top:10px;
    border-collapse:collapse;
}

th,td{
    padding:8px;
    border-bottom:1px solid #333;
}
</style>
</head>

<body>

<h1>Work ERP PRO</h1>

<div class="card">
<div id="status">Parado</div>
</div>

<div class="card">
<h2>Horas Hoje</h2>
<p id="hoursToday">0.00 h</p>
</div>

<button onclick="startWork()">Iniciar</button>
<button onclick="endWork()">Terminar</button>

<div class="card">
<h2>Salário Hoje</h2>
<p id="salaryToday">CHF 0.00</p>
</div>

<div class="card">
<h2>Histórico</h2>
<table>
<thead>
<tr>
<th>Data</th>
<th>Horas</th>
<th>Salário</th>
</tr>
</thead>
<tbody id="historyTable"></tbody>
</table>
</div>

<script>

const hourlyRate = 25; // altera aqui o valor por hora

let startTime = localStorage.getItem("startTime");
let history = JSON.parse(localStorage.getItem("history")) || [];

function updateUI(){
    let today = new Date().toLocaleDateString();
    let totalHours = 0;

    history.forEach(entry=>{
        if(entry.date === today){
            totalHours += entry.hours;
        }
    });

    document.getElementById("hoursToday").innerText = totalHours.toFixed(2) + " h";
    document.getElementById("salaryToday").innerText = 
        "CHF " + (totalHours * hourlyRate).toFixed(2);

    loadHistory();
}

function startWork(){
    if(!startTime){
        startTime = new Date().toISOString();
        localStorage.setItem("startTime", startTime);
        document.getElementById("status").innerText = "A trabalhar";
    }
}

function endWork(){
    if(startTime){
        let start = new Date(startTime);
        let end = new Date();
        let diff = (end - start) / (1000*60*60);

        let today = new Date().toLocaleDateString();

        history.push({
            date: today,
            hours: diff
        });

        localStorage.setItem("history", JSON.stringify(history));
        localStorage.removeItem("startTime");
        startTime = null;

        document.getElementById("status").innerText = "Parado";

        updateUI();
    }
}

function loadHistory(){
    let table = document.getElementById("historyTable");
    table.innerHTML = "";

    history.forEach(entry=>{
        let row = "<tr><td>"+entry.date+"</td><td>"+
        entry.hours.toFixed(2)+" h</td><td>CHF "+
        (entry.hours * hourlyRate).toFixed(2)+"</td></tr>";

        table.innerHTML += row;
    });
}

if(startTime){
    document.getElementById("status").innerText = "A trabalhar";
}

updateUI();

</script>

</body>
</html>